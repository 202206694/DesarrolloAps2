{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/pages/registro.module.css [ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"btnBack\": \"registro-module__TLiRYq__btnBack\",\n  \"customButton\": \"registro-module__TLiRYq__customButton\",\n  \"customFooter\": \"registro-module__TLiRYq__customFooter\",\n  \"customInput\": \"registro-module__TLiRYq__customInput\",\n  \"customSelect\": \"registro-module__TLiRYq__customSelect\",\n  \"error\": \"registro-module__TLiRYq__error\",\n  \"formContainer\": \"registro-module__TLiRYq__formContainer\",\n  \"header\": \"registro-module__TLiRYq__header\",\n  \"link\": \"registro-module__TLiRYq__link\",\n  \"logo\": \"registro-module__TLiRYq__logo\",\n  \"navCenter\": \"registro-module__TLiRYq__navCenter\",\n  \"pageContainer\": \"registro-module__TLiRYq__pageContainer\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patri/OneDrive/Documentos/3/DAS/DesarrolloApps3/subasta_das/the_muffins/pages/registro.jsx"],"sourcesContent":["'use client'\r\nimport React, { useState } from 'react';\r\nimport styles from './registro.module.css';\r\nimport Link from 'next/link';\r\n\r\nconst Registro = () => {\r\n    const [dni, setDni] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [surname, setSurname] = useState('');\r\n    const [birthdate, setBirthdate] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [passwordError, setPasswordError] = useState('');\r\n    const [formError, setFormError] = useState('');\r\n    const [comunidad, setComunidad] = useState(''); \r\n    const [ciudad, setCiudad] = useState('');\r\n\r\n    const comunidades = {\r\n        \"Andalucía\": [\"Sevilla\", \"Málaga\"],\r\n        \"Cataluña\": [\"Barcelona\", \"Tarragona\"],\r\n        \"Madrid\": [\"Madrid\", \"Alcalá de Henares\"],\r\n  \r\n    };\r\n\r\n    const handleComunidadChange = (e) => {\r\n        setComunidad(e.target.value);\r\n        setCiudad(comunidades[e.target.value][0]); \r\n    };\r\n\r\n    const handleConfirmPasswordChange = (e) => {\r\n        setConfirmPassword(e.target.value);\r\n        validatePasswords(password, e.target.value);\r\n    };\r\n\r\n    const validatePasswords = (pass1, pass2) => {\r\n        if (pass1 && pass2 && pass1 !== pass2) {\r\n            setPasswordError(\"Las contraseñas no coinciden.\");\r\n        } else {\r\n            setPasswordError('');\r\n        }\r\n    };\r\n\r\n    const validateForm = () => {\r\n        if (!dni || !name || !surname || !birthdate || !email || !username || !password || !confirmPassword || !comunidad || !ciudad) {\r\n            setFormError('Por favor, completa todos los campos.');\r\n            return false;\r\n        }\r\n\r\n        const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/;\r\n        if (!emailRegex.test(email)) {\r\n            setFormError('El correo electrónico no es válido.');\r\n            return false;\r\n        }\r\n\r\n        if (password.length < 8) {\r\n            setFormError('La contraseña debe tener al menos 8 caracteres.');\r\n            return false;\r\n        }\r\n\r\n        if (password !== confirmPassword) {\r\n            setFormError('Las contraseñas no coinciden.');\r\n            return false;\r\n        }\r\n\r\n        setFormError('');\r\n        return true;\r\n    };\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault();\r\n    \r\n        if (!validateForm()) {\r\n            return;\r\n        }\r\n    \r\n        const userData = {\r\n            username,\r\n            first_name: name,\r\n            last_name: surname,\r\n            email,\r\n            birth_date: birthdate,\r\n            municipality: ciudad,\r\n            locality: comunidad,\r\n            password\r\n        };\r\n    \r\n        try {\r\n            const response = await fetch('https://backend-the-muffins.onrender.com/api/users/register/', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(userData)\r\n            });\r\n    \r\n            const data = await response.json();\r\n            console.log(\"Respuesta del servidor:\", data);\r\n    \r\n            if (response.ok) {\r\n                // Guardar los tokens en localStorage\r\n                localStorage.setItem('accessToken', data.access);\r\n                localStorage.setItem('refreshToken', data.refresh);\r\n                localStorage.setItem('user', JSON.stringify(data.user));\r\n    \r\n                // Redirigir al usuario o mostrar mensaje de éxito\r\n                window.location.href = '/products'; // o la ruta que prefieras\r\n            } else {\r\n                setFormError('Error al registrar usuario: ' + JSON.stringify(data));\r\n            }\r\n        } catch (error) {\r\n            console.error('Error en el registro:', error);\r\n            setFormError('Hubo un problema al intentar registrar el usuario.');\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <div>\r\n            <header>\r\n                <nav>\r\n                    <div className={styles.navCenter}>\r\n                        <img src=\"/images/logo2.png\" alt=\"Logo de la joyería\" className={styles.logo} onClick={() => window.location.href = '/'}/>\r\n                    </div>\r\n                </nav>\r\n            </header>\r\n            <div className={styles.formContainer}>\r\n                <main>\r\n                    <form onSubmit={handleRegister}>\r\n                        <h2>Crear Cuenta</h2>\r\n                        {formError && <div className={styles.error}>{formError}</div>}\r\n\r\n                        <label htmlFor=\"dni\">DNI:</label>\r\n                        <input type=\"text\" id=\"dni\" name=\"dni\" placeholder=\"12345678X\" required pattern=\"[0-9]{8}[A-Za-z]{1}\" title=\"Debe ser un DNI válido con 8 números y una letra\" className={styles.customInput} onChange={e => setDni(e.target.value)} />\r\n\r\n                        <label htmlFor=\"name\">Nombre:</label>\r\n                        <input type=\"text\" id=\"name\" name=\"name\" placeholder=\"Nombre\" required className={styles.customInput} onChange={e => setName(e.target.value)} />\r\n\r\n                        <label htmlFor=\"surname\">Apellidos:</label>\r\n                        <input type=\"text\" id=\"surname\" name=\"surname\" placeholder=\"Apellidos\" required className={styles.customInput} onChange={e => setSurname(e.target.value)} />\r\n\r\n                        <label htmlFor=\"birthdate\">Fecha de nacimiento:</label>\r\n                        <input type=\"date\" id=\"birthdate\" name=\"birthdate\" required className={styles.customInput} onChange={e => setBirthdate(e.target.value)} />\r\n\r\n                        <label htmlFor=\"email\">Email:</label>\r\n                        <input type=\"email\" id=\"email\" name=\"email\" placeholder=\"Email\" required className={styles.customInput} onChange={e => setEmail(e.target.value)} />\r\n\r\n                        <label htmlFor=\"username\">Nombre de usuario:</label>\r\n                        <input type=\"text\" id=\"username\" name=\"username\" placeholder=\"Usuario\" required className={styles.customInput} onChange={e => setUsername(e.target.value)} />\r\n\r\n                        <label htmlFor=\"comunidad\">Comunidad Autónoma:</label>\r\n                        <select id=\"comunidad\" value={comunidad} onChange={handleComunidadChange} className={styles.customSelect}>\r\n                            <option value=\"\">Selecciona una comunidad</option>\r\n                            {Object.keys(comunidades).map(key => (\r\n                                <option key={key} value={key}>{key}</option>\r\n                            ))}\r\n                        </select>\r\n\r\n                        <label htmlFor=\"ciudad\">Ciudad:</label>\r\n                        <select id=\"ciudad\" value={ciudad} onChange={(e) => setCiudad(e.target.value)} className={styles.customSelect}>\r\n                            <option value=\"\">Selecciona una ciudad</option>\r\n                            {comunidad ? comunidades[comunidad].map(city => (\r\n                                <option key={city} value={city}>{city}</option>\r\n                            )) : null}\r\n                        </select>\r\n\r\n                        <label htmlFor=\"password\">Contraseña:</label>\r\n                        <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"Contraseña\" minLength=\"8\" required className={styles.customInput} onChange={e => setPassword(e.target.value)} />\r\n\r\n                        <label htmlFor=\"confirm_password\">Confirmar contraseña:</label>\r\n                        <input type=\"password\" id=\"confirm_password\" name=\"confirm_password\" placeholder=\"Confirmar contraseña\" required className={styles.customInput} onChange={handleConfirmPasswordChange} />\r\n                        {passwordError && <div className={styles.error}>{passwordError}</div>}\r\n\r\n                        <button type=\"submit\" className={styles.customButton}>Crear cuenta</button>\r\n                        <button type=\"reset\" className={styles.customButton}>Reset</button>\r\n                        <button className={styles.btnBack} onClick={() => window.history.back()}>⬅ Volver atrás</button>\r\n                    </form>\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Registro;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}